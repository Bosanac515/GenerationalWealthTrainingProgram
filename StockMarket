import requests

API_KEY = 'P2XPY4BU3ZX6ICDC'

def get_latest_stock_price(symbol):
    base_url = "https://www.alphavantage.co/query"
    params = {
        "function": "TIME_SERIES_INTRADAY",
        "symbol": symbol,
        "interval": "5min",  # Change the interval as needed (1min, 5min, 15min, etc.)
        "apikey": API_KEY
    }

    response = requests.get(base_url, params=params)

    if response.status_code == 200:
        data = response.json()
        latest_refresh = data['Meta Data']['3. Last Refreshed']
        latest_price = data['Time Series (5min)'][latest_refresh]['4. close']
        return float(latest_price)  # Convert the price to a float
    else:
        print("Failed to fetch data:", response.status_code)
        return None

def main():
    symbol = input("Enter the stock symbol (e.g., AAPL): ").upper()  # Allow user input for stock symbol
    latest_price = get_latest_stock_price(symbol)

    if latest_price is not None:
        print(f"The latest price for {symbol} is: ${latest_price:.2f} (Data delayed by 15-20 minutes)")  # Display with two decimal places
    else:
        print("Failed to fetch the price.")

if __name__ == "__main__":
    main()
